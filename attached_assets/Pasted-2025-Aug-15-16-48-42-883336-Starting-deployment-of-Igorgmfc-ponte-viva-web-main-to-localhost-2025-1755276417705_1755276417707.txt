2025-Aug-15 16:48:42.883336
Starting deployment of Igorgmfc/ponte-viva-web:main to localhost.
2025-Aug-15 16:48:43.102066
Preparing container with helper image: ghcr.io/coollabsio/coolify-helper:1.0.8.
2025-Aug-15 16:48:43.209430
[CMD]: docker stop --time=30 j4c8cc84cookc40ww84sw80g
2025-Aug-15 16:48:43.209430
Flag --time has been deprecated, use --timeout instead
2025-Aug-15 16:48:43.216942
Error response from daemon: No such container: j4c8cc84cookc40ww84sw80g
2025-Aug-15 16:48:43.459828
[CMD]: docker rm -f j4c8cc84cookc40ww84sw80g
2025-Aug-15 16:48:43.459828
Error response from daemon: No such container: j4c8cc84cookc40ww84sw80g
2025-Aug-15 16:48:43.715563
[CMD]: docker run -d --network coolify --name j4c8cc84cookc40ww84sw80g --rm -v /var/run/docker.sock:/var/run/docker.sock ghcr.io/coollabsio/coolify-helper:1.0.8
2025-Aug-15 16:48:43.715563
c002cda514056cd42db2f40b9b608b555c7782dca4a9a1d5419585ff7bbdfeec
2025-Aug-15 16:48:45.475432
[CMD]: docker exec j4c8cc84cookc40ww84sw80g bash -c 'GIT_SSH_COMMAND="ssh -o ConnectTimeout=30 -p 22 -o Port=22 -o LogLevel=ERROR -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null" git ls-remote https://x-access-token:<REDACTED>@github.com/Igorgmfc/ponte-viva-web.git main'
2025-Aug-15 16:48:45.475432
c675ee4a9eee407f26da32ab184330a6f06446a7	refs/heads/main
2025-Aug-15 16:48:45.716284
----------------------------------------
2025-Aug-15 16:48:45.726833
Importing Igorgmfc/ponte-viva-web:main (commit sha HEAD) to /artifacts/j4c8cc84cookc40ww84sw80g.
2025-Aug-15 16:48:45.993029
[CMD]: docker exec j4c8cc84cookc40ww84sw80g bash -c 'git clone -b "main" https://x-access-token:<REDACTED>@github.com/Igorgmfc/ponte-viva-web.git /artifacts/j4c8cc84cookc40ww84sw80g && cd /artifacts/j4c8cc84cookc40ww84sw80g && GIT_SSH_COMMAND="ssh -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null" git submodule update --init --recursive && cd /artifacts/j4c8cc84cookc40ww84sw80g && GIT_SSH_COMMAND="ssh -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null" git lfs pull'
2025-Aug-15 16:48:45.993029
Cloning into '/artifacts/j4c8cc84cookc40ww84sw80g'...
2025-Aug-15 16:48:47.282981
[CMD]: docker exec j4c8cc84cookc40ww84sw80g bash -c 'cd /artifacts/j4c8cc84cookc40ww84sw80g && git log -1 c675ee4a9eee407f26da32ab184330a6f06446a7 --pretty=%B'
2025-Aug-15 16:48:47.282981
Assistant checkpoint: Implement complete SEO optimization and dynamic insights
2025-Aug-15 16:48:47.282981
2025-Aug-15 16:48:47.282981
Assistant generated file changes:
2025-Aug-15 16:48:47.282981
- public/robots.txt: Create SEO-optimized robots.txt
2025-Aug-15 16:48:47.282981
- generate-sitemap.mjs: Enhanced sitemap generator with dynamic insights
2025-Aug-15 16:48:47.282981
- src/components/SEOHead.tsx: Create dynamic SEO meta tags component
2025-Aug-15 16:48:47.282981
- src/App.tsx: Add HelmetProvider for SEO
2025-Aug-15 16:48:47.282981
Add HelmetProvider for SEO
2025-Aug-15 16:48:47.282981
Wrap app with HelmetProvider
2025-Aug-15 16:48:47.282981
Add HelmetProvider for SEO
2025-Aug-15 16:48:47.282981
Wrap app with HelmetProvider
2025-Aug-15 16:48:47.282981
Close HelmetProvider
2025-Aug-15 16:48:47.282981
- src/pages/Insights.tsx: Update Insights page to fetch and display published insights
2025-Aug-15 16:48:47.282981
- src/pages/InsightDetail.tsx: Update InsightDetail page with dynamic SEO and content from database
2025-Aug-15 16:48:47.282981
- src/pages/Index.tsx: Add SEO to homepage
2025-Aug-15 16:48:47.282981
Add SEO to homepage
2025-Aug-15 16:48:47.282981
Add SEO component to homepage
2025-Aug-15 16:48:47.282981
2025-Aug-15 16:48:47.282981
---
2025-Aug-15 16:48:47.282981
2025-Aug-15 16:48:47.282981
User prompt:
2025-Aug-15 16:48:47.282981
2025-Aug-15 16:48:47.282981
instalei as dependencias:
2025-Aug-15 16:48:47.282981
react-helmet-async e date-fns, no meu coolify. então acredito que irá funcionar,por gentileza faça as alterações no repositorio do github para que eu faça o deploy
2025-Aug-15 16:48:47.282981
2025-Aug-15 16:48:47.282981
Replit-Commit-Author: Assistant
2025-Aug-15 16:48:47.282981
Replit-Commit-Session-Id: 9d172e52-e7be-4eac-ac07-68285a4b946d
2025-Aug-15 16:48:47.436496
Image not found (twkoko80ws40ossckwswgwg0:c675ee4a9eee407f26da32ab184330a6f06446a7). Building new image.
2025-Aug-15 16:48:48.343387
[CMD]: docker exec j4c8cc84cookc40ww84sw80g bash -c 'cat /artifacts/j4c8cc84cookc40ww84sw80g/Dockerfile'
2025-Aug-15 16:48:48.343387
# =================================================================
2025-Aug-15 16:48:48.343387
# Estágio 1: O Construtor (Builder)
2025-Aug-15 16:48:48.343387
# Aqui nós instalamos tudo e construímos o site.
2025-Aug-15 16:48:48.343387
# =================================================================
2025-Aug-15 16:48:48.343387
FROM node:20-alpine AS builder
2025-Aug-15 16:48:48.343387
WORKDIR /app
2025-Aug-15 16:48:48.343387
2025-Aug-15 16:48:48.343387
# Instalar curl para healthcheck (boa prática, pode manter)
2025-Aug-15 16:48:48.343387
RUN apk add --no-cache curl
2025-Aug-15 16:48:48.343387
2025-Aug-15 16:48:48.343387
# Copia a planta.
2025-Aug-15 16:48:48.343387
COPY package.json package-lock.json* ./
2025-Aug-15 16:48:48.343387
2025-Aug-15 16:48:48.343387
# Instala TODAS as dependências (peças E ferramentas). ESTA É A CORREÇÃO.
2025-Aug-15 16:48:48.343387
RUN npm install
2025-Aug-15 16:48:48.343387
2025-Aug-15 16:48:48.343387
# Copia o resto do código fonte.
2025-Aug-15 16:48:48.343387
COPY . .
2025-Aug-15 16:48:48.343387
2025-Aug-15 16:48:48.343387
# Definir variáveis de ambiente para build
2025-Aug-15 16:48:48.343387
ARG VITE_SUPABASE_URL
2025-Aug-15 16:48:48.343387
ARG VITE_SUPABASE_ANON_KEY
2025-Aug-15 16:48:48.343387
ENV VITE_SUPABASE_URL=$VITE_SUPABASE_URL
2025-Aug-15 16:48:48.343387
ENV VITE_SUPABASE_ANON_KEY=$VITE_SUPABASE_ANON_KEY
2025-Aug-15 16:48:48.343387
2025-Aug-15 16:48:48.343387
# Constrói a versão final do site na pasta /app/dist.
2025-Aug-15 16:48:48.343387
RUN npm run build
2025-Aug-15 16:48:48.343387
2025-Aug-15 16:48:48.343387
2025-Aug-15 16:48:48.343387
# =================================================================
2025-Aug-15 16:48:48.343387
# Estágio 2: O Entregador (Server)
2025-Aug-15 16:48:48.343387
# Este é um contêiner limpo que só serve o site pronto.
2025-Aug-15 16:48:48.343387
# =================================================================
2025-Aug-15 16:48:48.343387
FROM node:20-alpine AS production
2025-Aug-15 16:48:48.343387
WORKDIR /app
2025-Aug-15 16:48:48.343387
2025-Aug-15 16:48:48.343387
# Instalar curl para healthcheck
2025-Aug-15 16:48:48.343387
RUN apk add --no-cache curl
2025-Aug-15 16:48:48.343387
2025-Aug-15 16:48:48.343387
# Instala APENAS a ferramenta que precisamos: o servidor 'serve'.
2025-Aug-15 16:48:48.343387
RUN npm install -g serve
2025-Aug-15 16:48:48.343387
2025-Aug-15 16:48:48.343387
# Copia o site pronto (a pasta 'dist') do estágio do Construtor.
2025-Aug-15 16:48:48.343387
COPY --from=builder /app/dist ./dist
2025-Aug-15 16:48:48.343387
2025-Aug-15 16:48:48.343387
# Criar usuário não-root para segurança
2025-Aug-15 16:48:48.343387
RUN addgroup -g 1001 -S nodejs
2025-Aug-15 16:48:48.343387
RUN adduser -S nextjs -u 1001
2025-Aug-15 16:48:48.343387
RUN chown -R nextjs:nodejs /app
2025-Aug-15 16:48:48.343387
USER nextjs
2025-Aug-15 16:48:48.343387
2025-Aug-15 16:48:48.343387
# Expõe a porta que o servidor vai usar.
2025-Aug-15 16:48:48.343387
EXPOSE 3000
2025-Aug-15 16:48:48.343387
2025-Aug-15 16:48:48.343387
# Healthcheck
2025-Aug-15 16:48:48.343387
HEALTHCHECK --interval=30s --timeout=3s --start-period=5s --retries=3 \
2025-Aug-15 16:48:48.343387
CMD curl -f http://localhost:3000 || exit 1
2025-Aug-15 16:48:48.343387
2025-Aug-15 16:48:48.343387
# Comando final para iniciar o servidor.
2025-Aug-15 16:48:48.343387
# A flag '-s' é crucial para que o roteamento de páginas como /admin funcione.
2025-Aug-15 16:48:48.343387
CMD ["serve", "-s", "dist", "-l", "3000"]
2025-Aug-15 16:48:48.883248
[CMD]: docker exec j4c8cc84cookc40ww84sw80g bash -c 'cat /artifacts/j4c8cc84cookc40ww84sw80g/Dockerfile'
2025-Aug-15 16:48:48.883248
# =================================================================
2025-Aug-15 16:48:48.883248
# Estágio 1: O Construtor (Builder)
2025-Aug-15 16:48:48.883248
# Aqui nós instalamos tudo e construímos o site.
2025-Aug-15 16:48:48.883248
# =================================================================
2025-Aug-15 16:48:48.883248
FROM node:20-alpine AS builder
2025-Aug-15 16:48:48.883248
WORKDIR /app
2025-Aug-15 16:48:48.883248
2025-Aug-15 16:48:48.883248
# Instalar curl para healthcheck (boa prática, pode manter)
2025-Aug-15 16:48:48.883248
RUN apk add --no-cache curl
2025-Aug-15 16:48:48.883248
2025-Aug-15 16:48:48.883248
# Copia a planta.
2025-Aug-15 16:48:48.883248
COPY package.json package-lock.json* ./
2025-Aug-15 16:48:48.883248
2025-Aug-15 16:48:48.883248
# Instala TODAS as dependências (peças E ferramentas). ESTA É A CORREÇÃO.
2025-Aug-15 16:48:48.883248
RUN npm install
2025-Aug-15 16:48:48.883248
2025-Aug-15 16:48:48.883248
# Copia o resto do código fonte.
2025-Aug-15 16:48:48.883248
COPY . .
2025-Aug-15 16:48:48.883248
2025-Aug-15 16:48:48.883248
# Definir variáveis de ambiente para build
2025-Aug-15 16:48:48.883248
ARG VITE_SUPABASE_URL
2025-Aug-15 16:48:48.883248
ARG VITE_SUPABASE_ANON_KEY
2025-Aug-15 16:48:48.883248
ENV VITE_SUPABASE_URL=$VITE_SUPABASE_URL
2025-Aug-15 16:48:48.883248
ENV VITE_SUPABASE_ANON_KEY=$VITE_SUPABASE_ANON_KEY
2025-Aug-15 16:48:48.883248
2025-Aug-15 16:48:48.883248
# Constrói a versão final do site na pasta /app/dist.
2025-Aug-15 16:48:48.883248
RUN npm run build
2025-Aug-15 16:48:48.883248
2025-Aug-15 16:48:48.883248
2025-Aug-15 16:48:48.883248
# =================================================================
2025-Aug-15 16:48:48.883248
# Estágio 2: O Entregador (Server)
2025-Aug-15 16:48:48.883248
# Este é um contêiner limpo que só serve o site pronto.
2025-Aug-15 16:48:48.883248
# =================================================================
2025-Aug-15 16:48:48.883248
FROM node:20-alpine AS production
2025-Aug-15 16:48:48.883248
WORKDIR /app
2025-Aug-15 16:48:48.883248
2025-Aug-15 16:48:48.883248
# Instalar curl para healthcheck
2025-Aug-15 16:48:48.883248
RUN apk add --no-cache curl
2025-Aug-15 16:48:48.883248
2025-Aug-15 16:48:48.883248
# Instala APENAS a ferramenta que precisamos: o servidor 'serve'.
2025-Aug-15 16:48:48.883248
RUN npm install -g serve
2025-Aug-15 16:48:48.883248
2025-Aug-15 16:48:48.883248
# Copia o site pronto (a pasta 'dist') do estágio do Construtor.
2025-Aug-15 16:48:48.883248
COPY --from=builder /app/dist ./dist
2025-Aug-15 16:48:48.883248
2025-Aug-15 16:48:48.883248
# Criar usuário não-root para segurança
2025-Aug-15 16:48:48.883248
RUN addgroup -g 1001 -S nodejs
2025-Aug-15 16:48:48.883248
RUN adduser -S nextjs -u 1001
2025-Aug-15 16:48:48.883248
RUN chown -R nextjs:nodejs /app
2025-Aug-15 16:48:48.883248
USER nextjs
2025-Aug-15 16:48:48.883248
2025-Aug-15 16:48:48.883248
# Expõe a porta que o servidor vai usar.
2025-Aug-15 16:48:48.883248
EXPOSE 3000
2025-Aug-15 16:48:48.883248
2025-Aug-15 16:48:48.883248
# Healthcheck
2025-Aug-15 16:48:48.883248
HEALTHCHECK --interval=30s --timeout=3s --start-period=5s --retries=3 \
2025-Aug-15 16:48:48.883248
CMD curl -f http://localhost:3000 || exit 1
2025-Aug-15 16:48:48.883248
2025-Aug-15 16:48:48.883248
# Comando final para iniciar o servidor.
2025-Aug-15 16:48:48.883248
# A flag '-s' é crucial para que o roteamento de páginas como /admin funcione.
2025-Aug-15 16:48:48.883248
CMD ["serve", "-s", "dist", "-l", "3000"]
2025-Aug-15 16:48:49.079645
----------------------------------------
2025-Aug-15 16:48:49.090301
Building docker image started.
2025-Aug-15 16:48:49.094900
To check the current progress, click on Show Debug Logs.
2025-Aug-15 16:48:49.414753
[CMD]: docker exec j4c8cc84cookc40ww84sw80g bash -c 'cat /artifacts/build.sh'
2025-Aug-15 16:48:49.414753
docker build  --add-host coolify:10.0.1.5 --add-host coolify-db:10.0.1.4 --add-host coolify-realtime:10.0.1.3 --add-host coolify-redis:10.0.1.2 --add-host usow4kggokok0cgc0cgc00sc:10.0.1.7 --network host -f /artifacts/j4c8cc84cookc40ww84sw80g/Dockerfile --build-arg SOURCE_COMMIT='c675ee4a9eee407f26da32ab184330a6f06446a7' --build-arg VITE_SUPABASE_ANON_KEY='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBmeHdzcWZvYmRld2Nid2prbWZnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUwOTk4NzksImV4cCI6MjA3MDY3NTg3OX0.JOuQvgZhkL3dne5BIaywydif71NvO9bXfXtyUNwYiFI' --build-arg VITE_SUPABASE_URL='https://pfxwsqfobdewcbwjkmfg.supabase.co' --build-arg 'COOLIFY_URL=https://estrategiaviva.com.br' --build-arg 'COOLIFY_FQDN=estrategiaviva.com.br' --build-arg 'COOLIFY_BRANCH=main' --build-arg 'COOLIFY_RESOURCE_UUID=twkoko80ws40ossckwswgwg0' --build-arg 'COOLIFY_CONTAINER_NAME=twkoko80ws40ossckwswgwg0-164841311199' --progress plain -t twkoko80ws40ossckwswgwg0:c675ee4a9eee407f26da32ab184330a6f06446a7 /artifacts/j4c8cc84cookc40ww84sw80g
2025-Aug-15 16:48:49.898253
[CMD]: docker exec j4c8cc84cookc40ww84sw80g bash -c 'bash /artifacts/build.sh'
2025-Aug-15 16:48:49.898253
#0 building with "default" instance using docker driver
2025-Aug-15 16:48:49.898253
2025-Aug-15 16:48:49.898253
#1 [internal] load build definition from Dockerfile
2025-Aug-15 16:48:49.902035
#1 transferring dockerfile: 2.19kB done
2025-Aug-15 16:48:49.902035
#1 DONE 0.0s
2025-Aug-15 16:48:49.902035
2025-Aug-15 16:48:49.902035
#2 [internal] load metadata for docker.io/library/node:20-alpine
2025-Aug-15 16:48:50.197424
#2 DONE 0.4s
2025-Aug-15 16:48:50.355616
#3 [internal] load .dockerignore
2025-Aug-15 16:48:50.355616
#3 transferring context: 731B done
2025-Aug-15 16:48:50.355616
#3 DONE 0.0s
2025-Aug-15 16:48:50.355616
2025-Aug-15 16:48:50.355616
#4 [builder 1/7] FROM docker.io/library/node:20-alpine@sha256:df02558528d3d3d0d621f112e232611aecfee7cbc654f6b375765f72bb262799
2025-Aug-15 16:48:50.355616
#4 DONE 0.0s
2025-Aug-15 16:48:50.355616
2025-Aug-15 16:48:50.355616
#5 [internal] load build context
2025-Aug-15 16:48:50.355616
#5 transferring context: 1.04MB 0.0s done
2025-Aug-15 16:48:50.355616
#5 DONE 0.1s
2025-Aug-15 16:48:50.355616
2025-Aug-15 16:48:50.355616
#6 [builder 4/7] COPY package.json package-lock.json* ./
2025-Aug-15 16:48:50.355616
#6 CACHED
2025-Aug-15 16:48:50.355616
2025-Aug-15 16:48:50.355616
#7 [builder 2/7] WORKDIR /app
2025-Aug-15 16:48:50.355616
#7 CACHED
2025-Aug-15 16:48:50.355616
2025-Aug-15 16:48:50.355616
#8 [builder 3/7] RUN apk add --no-cache curl
2025-Aug-15 16:48:50.355616
#8 CACHED
2025-Aug-15 16:48:50.355616
2025-Aug-15 16:48:50.355616
#9 [builder 5/7] RUN npm install
2025-Aug-15 16:48:50.355616
#9 CACHED
2025-Aug-15 16:48:50.355616
2025-Aug-15 16:48:50.355616
#10 [builder 6/7] COPY . .
2025-Aug-15 16:48:50.355616
#10 DONE 0.1s
2025-Aug-15 16:48:50.513270
#11 [builder 7/7] RUN npm run build
2025-Aug-15 16:48:50.609540
#11 0.251
2025-Aug-15 16:48:50.609540
#11 0.251 > vite_react_shadcn_ts@0.0.0 build
2025-Aug-15 16:48:50.609540
#11 0.251 > node ./generate-sitemap.mjs && vite build
2025-Aug-15 16:48:50.609540
#11 0.251
2025-Aug-15 16:48:50.774508
#11 0.416 🚀 Generating sitemap...
2025-Aug-15 16:48:50.922450
#11 0.564 ❌ Error fetching insights: {
2025-Aug-15 16:48:50.922450
#11 0.564   code: 'PGRST205',
2025-Aug-15 16:48:50.922450
#11 0.564   details: null,
2025-Aug-15 16:48:50.922450
#11 0.564   hint: null,
2025-Aug-15 16:48:50.922450
#11 0.564   message: "Could not find the table 'public.insights' in the schema cache"
2025-Aug-15 16:48:50.922450
#11 0.564 }
2025-Aug-15 16:48:51.071729
#11 ERROR: process "/bin/sh -c npm run build" did not complete successfully: exit code: 1
2025-Aug-15 16:48:51.104987
------
2025-Aug-15 16:48:51.104987
> [builder 7/7] RUN npm run build:
2025-Aug-15 16:48:51.104987
0.251 > vite_react_shadcn_ts@0.0.0 build
2025-Aug-15 16:48:51.104987
0.251 > node ./generate-sitemap.mjs && vite build
2025-Aug-15 16:48:51.104987
0.251
2025-Aug-15 16:48:51.104987
0.416 🚀 Generating sitemap...
2025-Aug-15 16:48:51.104987
0.564 ❌ Error fetching insights: {
2025-Aug-15 16:48:51.104987
0.564   code: 'PGRST205',
2025-Aug-15 16:48:51.104987
0.564   details: null,
2025-Aug-15 16:48:51.104987
0.564   hint: null,
2025-Aug-15 16:48:51.104987
0.564   message: "Could not find the table 'public.insights' in the schema cache"
2025-Aug-15 16:48:51.104987
0.564 }
2025-Aug-15 16:48:51.104987
------
2025-Aug-15 16:48:51.127957
2025-Aug-15 16:48:51.139694
2 warnings found (use docker --debug to expand):
2025-Aug-15 16:48:51.139694
- SecretsUsedInArgOrEnv: Do not use ARG or ENV instructions for sensitive data (ARG "VITE_SUPABASE_ANON_KEY") (line 24)
2025-Aug-15 16:48:51.139694
- SecretsUsedInArgOrEnv: Do not use ARG or ENV instructions for sensitive data (ENV "VITE_SUPABASE_ANON_KEY") (line 26)
2025-Aug-15 16:48:51.139694
Dockerfile:29
2025-Aug-15 16:48:51.139694
--------------------
2025-Aug-15 16:48:51.139694
27 |
2025-Aug-15 16:48:51.139694
28 |     # Constrói a versão final do site na pasta /app/dist.
2025-Aug-15 16:48:51.139694
29 | >>> RUN npm run build
2025-Aug-15 16:48:51.139694
30 |
2025-Aug-15 16:48:51.139694
31 |
2025-Aug-15 16:48:51.139694
--------------------
2025-Aug-15 16:48:51.139694
ERROR: failed to solve: process "/bin/sh -c npm run build" did not complete successfully: exit code: 1
2025-Aug-15 16:48:51.148129
exit status 1
2025-Aug-15 16:48:51.235116
Oops something is not okay, are you okay? 😢
2025-Aug-15 16:48:51.241457
#0 building with "default" instance using docker driver
2025-Aug-15 16:48:51.241457
2025-Aug-15 16:48:51.241457
#1 [internal] load build definition from Dockerfile
2025-Aug-15 16:48:51.241457
#1 transferring dockerfile: 2.19kB done
2025-Aug-15 16:48:51.241457
#1 DONE 0.0s
2025-Aug-15 16:48:51.241457
2025-Aug-15 16:48:51.241457
#2 [internal] load metadata for docker.io/library/node:20-alpine
2025-Aug-15 16:48:51.241457
#2 DONE 0.4s
2025-Aug-15 16:48:51.241457
2025-Aug-15 16:48:51.241457
#3 [internal] load .dockerignore
2025-Aug-15 16:48:51.241457
#3 transferring context: 731B done
2025-Aug-15 16:48:51.241457
#3 DONE 0.0s
2025-Aug-15 16:48:51.241457
2025-Aug-15 16:48:51.241457
#4 [builder 1/7] FROM docker.io/library/node:20-alpine@sha256:df02558528d3d3d0d621f112e232611aecfee7cbc654f6b375765f72bb262799
2025-Aug-15 16:48:51.241457
#4 DONE 0.0s
2025-Aug-15 16:48:51.241457
2025-Aug-15 16:48:51.241457
#5 [internal] load build context
2025-Aug-15 16:48:51.241457
#5 transferring context: 1.04MB 0.0s done
2025-Aug-15 16:48:51.241457
#5 DONE 0.1s
2025-Aug-15 16:48:51.241457
2025-Aug-15 16:48:51.241457
#6 [builder 4/7] COPY package.json package-lock.json* ./
2025-Aug-15 16:48:51.241457
#6 CACHED
2025-Aug-15 16:48:51.241457
2025-Aug-15 16:48:51.241457
#7 [builder 2/7] WORKDIR /app
2025-Aug-15 16:48:51.241457
#7 CACHED
2025-Aug-15 16:48:51.241457
2025-Aug-15 16:48:51.241457
#8 [builder 3/7] RUN apk add --no-cache curl
2025-Aug-15 16:48:51.241457
#8 CACHED
2025-Aug-15 16:48:51.241457
2025-Aug-15 16:48:51.241457
#9 [builder 5/7] RUN npm install
2025-Aug-15 16:48:51.241457
#9 CACHED
2025-Aug-15 16:48:51.241457
2025-Aug-15 16:48:51.241457
#10 [builder 6/7] COPY . .
2025-Aug-15 16:48:51.241457
#10 DONE 0.1s
2025-Aug-15 16:48:51.241457
2025-Aug-15 16:48:51.241457
#11 [builder 7/7] RUN npm run build
2025-Aug-15 16:48:51.241457
#11 0.251
2025-Aug-15 16:48:51.241457
#11 0.251 > vite_react_shadcn_ts@0.0.0 build
2025-Aug-15 16:48:51.241457
#11 0.251 > node ./generate-sitemap.mjs && vite build
2025-Aug-15 16:48:51.241457
#11 0.251
2025-Aug-15 16:48:51.241457
#11 0.416 🚀 Generating sitemap...
2025-Aug-15 16:48:51.241457
#11 0.564 ❌ Error fetching insights: {
2025-Aug-15 16:48:51.241457
#11 0.564   code: 'PGRST205',
2025-Aug-15 16:48:51.241457
#11 0.564   details: null,
2025-Aug-15 16:48:51.241457
#11 0.564   hint: null,
2025-Aug-15 16:48:51.241457
#11 0.564   message: "Could not find the table 'public.insights' in the schema cache"
2025-Aug-15 16:48:51.241457
#11 0.564 }
2025-Aug-15 16:48:51.241457
#11 ERROR: process "/bin/sh -c npm run build" did not complete successfully: exit code: 1
2025-Aug-15 16:48:51.241457
------
2025-Aug-15 16:48:51.241457
> [builder 7/7] RUN npm run build:
2025-Aug-15 16:48:51.241457
0.251 > vite_react_shadcn_ts@0.0.0 build
2025-Aug-15 16:48:51.241457
0.251 > node ./generate-sitemap.mjs && vite build
2025-Aug-15 16:48:51.241457
0.251
2025-Aug-15 16:48:51.241457
0.416 🚀 Generating sitemap...
2025-Aug-15 16:48:51.241457
0.564 ❌ Error fetching insights: {
2025-Aug-15 16:48:51.241457
0.564   code: 'PGRST205',
2025-Aug-15 16:48:51.241457
0.564   details: null,
2025-Aug-15 16:48:51.241457
0.564   hint: null,
2025-Aug-15 16:48:51.241457
0.564   message: "Could not find the table 'public.insights' in the schema cache"
2025-Aug-15 16:48:51.241457
0.564 }
2025-Aug-15 16:48:51.241457
------
2025-Aug-15 16:48:51.241457
2025-Aug-15 16:48:51.241457
2 warnings found (use docker --debug to expand):
2025-Aug-15 16:48:51.241457
- SecretsUsedInArgOrEnv: Do not use ARG or ENV instructions for sensitive data (ARG "VITE_SUPABASE_ANON_KEY") (line 24)
2025-Aug-15 16:48:51.241457
- SecretsUsedInArgOrEnv: Do not use ARG or ENV instructions for sensitive data (ENV "VITE_SUPABASE_ANON_KEY") (line 26)
2025-Aug-15 16:48:51.241457
Dockerfile:29
2025-Aug-15 16:48:51.241457
--------------------
2025-Aug-15 16:48:51.241457
27 |
2025-Aug-15 16:48:51.241457
28 |     # Constrói a versão final do site na pasta /app/dist.
2025-Aug-15 16:48:51.241457
29 | >>> RUN npm run build
2025-Aug-15 16:48:51.241457
30 |
2025-Aug-15 16:48:51.241457
31 |
2025-Aug-15 16:48:51.241457
--------------------
2025-Aug-15 16:48:51.241457
ERROR: failed to solve: process "/bin/sh -c npm run build" did not complete successfully: exit code: 1
2025-Aug-15 16:48:51.241457
exit status 1
2025-Aug-15 16:48:51.247974
Deployment failed. Removing the new version of your application.
2025-Aug-15 16:48:51.658252
Gracefully shutting down build container: j4c8cc84cookc40ww84sw80g
2025-Aug-15 16:48:51.766734
[CMD]: docker stop --time=30 j4c8cc84cookc40ww84sw80g
2025-Aug-15 16:48:51.766734
Flag --time has been deprecated, use --timeout instead
2025-Aug-15 16:48:51.934534
j4c8cc84cookc40ww84sw80g
2025-Aug-15 16:48:52.062509
[CMD]: docker rm -f j4c8cc84cookc40ww84sw80g
2025-Aug-15 16:48:52.062509
Error response from daemon: No such container: j4c8cc84cookc40ww84sw80g